<html lang="ko">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>게시물 목록</title>
    <style>
      body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial; background:#f7fafc; color:#111827; margin:0; padding:24px; }
      .container { max-width:980px; margin:0 auto; }
      header { display:flex; align-items:center; justify-content:space-between; gap:16px; margin-bottom:16px; }
      h1 { margin:0; font-size:1.4rem; }
      form.search { display:flex; gap:8px; align-items:center; }
      .search input[type="text"]{ padding:8px 10px; border:1px solid #d1d5db; border-radius:6px; min-width:220px; }
      .search select{ padding:8px; border:1px solid #d1d5db; border-radius:6px; }
      .search button{ padding:8px 12px; background:#2563eb; color:#fff; border:none; border-radius:6px; cursor:pointer; }
      .list { display:grid; grid-template-columns:1fr; gap:12px; list-style:none; padding:0; margin:0 0 16px 0; }
      .card { background:#fff; border:1px solid #e6e9ee; border-radius:8px; padding:12px 16px; box-shadow:0 1px 2px rgba(15,23,42,0.03); display:flex; justify-content:space-between; gap:12px; }
      .card .meta { color:#6b7280; font-size:0.9rem; }
      .card .title { font-weight:600; color:#111827; margin-bottom:6px; font-size:1.05rem; }
      .card .snippet { color:#374151; font-size:0.95rem; }
      .card .right { text-align:right; min-width:110px; }
      .card a.title-link { text-decoration:none; color:inherit; }
      .pagination { display:flex; gap:8px; align-items:center; }
  .btn { display:inline-block; padding:8px 12px; border-radius:6px; border:1px solid #d1d5db; background:#fff; color:#111827; text-decoration:none; }
  .btn.primary { background:#2563eb; color:#fff; border-color:#2563eb; }
  .btn.disabled { opacity:0.5; pointer-events:none; }
      .empty { text-align:center; color:#6b7280; padding:24px 0; }
      @media (min-width:700px){ .list { grid-template-columns: 1fr; } }
    </style>
  </head>
  <body>
    <div class="container">
      <header>
        <h1>게시물 목록</h1>
        <div style="display:flex; gap:12px; align-items:center;">
          <form class="search" method="get" action="/posts/web">
            <input type="text" name="q" placeholder="제목 또는 내용 검색" value="{{q}}" />
            <select name="limit">
              <option value="5">5</option>
              <option value="10">10</option>
              <option value="20">20</option>
            </select>
            <button type="submit">검색</button>
          </form>
          <a class="btn primary" href="/posts/web/create">작성하기</a>
        </div>
      </header>

      {{#if posts.length}}
        <ul class="list">
          {{#each posts}}
            <li class="card">
              <div>
                <a class="title-link" href="/posts/web/{{this._id}}">
                  <div class="title">{{this.title}}</div>
                </a>
                <div class="snippet">{{#if this.content}}{{this.content}}{{else}}(내용 없음){{/if}}</div>
                <div class="meta">작성자: {{this.author}} · 생성: {{this.createdAt}}</div>
                <div style="margin-top:8px; display:flex; gap:8px;">
                  <a class="btn" href="/posts/web/{{this._id}}">조회</a>
                  <a class="btn" href="/posts/web/{{this._id}}">수정</a>
                  <form method="post" action="/posts/web/{{this._id}}/delete" style="display:inline;" onsubmit="return confirm('삭제하시겠습니까?');">
                    <button type="submit" class="btn">삭제</button>
                  </form>
                </div>
              </div>
              <div class="right">
                <div class="meta">조회수</div>
                <div style="font-weight:600; margin-top:6px">{{this.views}}</div>
              </div>
            </li>
          {{/each}}
        </ul>
      {{else}}
        <div class="empty">등록된 게시물이 없습니다.</div>
      {{/if}}

      <div style="display:flex; justify-content:space-between; align-items:center; margin-top:12px;">
        <div>
          <a class="btn {{#unless prevExists}}disabled{{/unless}}" href="{{#if prevExists}}{{prevUrl}}{{else}}#{{/if}}">← 이전</a>
        </div>
        <div class="pagination">
          <div>전체: {{total}} &nbsp; | &nbsp; skip: {{skip}} / limit: {{limit}}</div>
          <a class="btn primary {{#unless nextExists}}disabled{{/unless}}" href="{{#if nextExists}}{{nextUrl}}{{else}}#{{/if}}">다음 →</a>
        </div>
      </div>
    </div>
  </body>
</html>